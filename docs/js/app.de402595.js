(function(e){function t(t){for(var n,c,s=t[0],o=t[1],u=t[2],d=0,p=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var o=r[s];0!==a[o]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},i=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=o;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[r("v-spacer"),r("span",{staticClass:"mr-2"},[e._v("New Taipei Kindergardens")]),r("v-spacer")],1),r("v-content",[r("v-row",{attrs:{align:"center"}},[r("v-spacer"),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[r("v-select",{attrs:{items:e.getAllDist(),label:"區",dense:""},model:{value:e.selectedDist,callback:function(t){e.selectedDist=t},expression:"selectedDist"}})],1),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6"}},[r("v-select",{attrs:{items:e.getAllType(),label:"類型",dense:""},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}})],1),r("v-spacer")],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"12"}},[r("v-btn",{on:{click:function(t){return e.calculateAllMatched()}}},[e._v("計算開車路徑")])],1)],1),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.filteredKindergardens,"items-per-page":e.perPage},scopedSlots:e._u([{key:"item.direction",fn:function(t){var n=t.item;return[n.direction?r("div",[r("div",[e._v("距離: "+e._s(n.direction.kilometer.toFixed(2))+"公里")]),r("div",[e._v("時間: "+e._s(n.direction.minute.toFixed(2))+"分鐘")])]):r("v-btn",{on:{click:function(t){return e.calculateDirectionFrom(n)}}},[e._v("GET")])]}}])})],1)],1)},i=[],c=(r("99af"),r("4de4"),r("7db0"),r("c740"),r("4160"),r("caad"),r("d81d"),r("b0c0"),r("b64b"),r("ac1f"),r("2532"),r("1276"),r("159b"),r("96cf"),r("1da1")),s=r("2909"),o=r("d4ec"),u=r("bee2"),l=r("262e"),d=r("2caf"),p=r("9ab4"),f=r("60a3"),v=r("bc3a"),b=r.n(v),h=function(e){Object(l["a"])(r,e);var t=Object(d["a"])(r);function r(){var e;return Object(o["a"])(this,r),e=t.apply(this,arguments),e.perPage=10,e.headers=[{text:"Name",align:"start",sortable:!1,value:"name"},{text:"max students",value:"maxStudents"},{text:"address",value:"address"},{text:"type",value:"type"},{text:"phone",value:"phone"},{text:"direction",value:"direction"}],e.kindergardens=[],e.locations=[],e.currentPosition=null,e.selectedType="",e.selectedDist="",e}return Object(u["a"])(r,[{key:"getAllType",value:function(){var e={};return this.kindergardens.forEach((function(t){e[t.type]=!0})),[{text:"All",value:""}].concat(Object(s["a"])(Object.keys(e).map((function(e){return{text:e,value:e}}))))}},{key:"getAllDist",value:function(){var e={};return this.kindergardens.forEach((function(t){var r=t.address.split("區")[0].split("市")[1];e[r]=!0})),[{text:"All",value:""}].concat(Object(s["a"])(Object.keys(e).map((function(e){return{text:e,value:e}}))))}},{key:"calculateAllMatched",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentPosition){e.next=3;break}return alert("Please allow location permission"),e.abrupt("return");case 3:this.filteredKindergardens.forEach(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(r.direction||n>=t.perPage)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.getDirection(t.currentPosition,r.location);case 4:a=e.sent,r.direction={kilometer:a.distance,minute:a.duration},f["b"].set(t.kindergardens,n,r);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"calculateDirectionFrom",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.currentPosition){e.next=3;break}return alert("Please allow location permission"),e.abrupt("return");case 3:return e.next=5,this.getDirection(this.currentPosition,t.location);case 5:r=e.sent,t.direction={kilometer:r.distance,minute:r.duration},n=this.kindergardens.findIndex((function(e){return e.name===t.name})),n>=0&&f["b"].set(this.kindergardens,n,t);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.getUserPosition(),t="./data.json",e.next=4,b.a.get("".concat(t));case 4:return r=e.sent,e.next=7,b.a.get("./location.json");case 7:n=e.sent,this.kindergardens=r.data.map((function(e){var t=n.data.find((function(t){return t.name===e.title}));return{name:e.title,type:e.type,maxStudents:e.recruit,phone:e.tel,address:e.address,location:t&&t.location}}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDirection",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="5b3ce3597851110001cf624879337138a41d4de8ab6a36f2ea031112",a="https://api.openrouteservice.org/v2/directions/driving-car?api_key=".concat(n,"&start=").concat(t.lng,",").concat(t.lat,"&end=").concat(r.lng,",").concat(r.lat),e.next=4,b.a.get("".concat(a));case 4:if(i=e.sent,c=i.data.features&&i.data.features[0],!c){e.next=8;break}return e.abrupt("return",{distance:c.properties.summary.distance/1e3,duration:c.properties.summary.duration/60});case 8:return e.abrupt("return",{distance:0,duration:0});case 9:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getUserPosition",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.currentPosition={lat:t.coords.latitude,lng:t.coords.longitude}}))}},{key:"filteredKindergardens",get:function(){var e=this;return this.kindergardens.filter((function(t){return(""===e.selectedType||e.selectedType===t.type)&&(""===e.selectedDist||t.address.includes(e.selectedDist))}))}}]),r}(f["b"]);h=Object(p["a"])([f["a"]],h);var g=h,m=g,y=r("2877"),x=r("6544"),k=r.n(x),w=r("7496"),j=r("40dc"),O=r("8336"),P=r("62ad"),_=r("a75b"),D=r("8fea"),T=r("0fd9"),R=r("b974"),A=r("2fa4"),S=Object(y["a"])(m,a,i,!1,null,null,null),V=S.exports;k()(S,{VApp:w["a"],VAppBar:j["a"],VBtn:O["a"],VCol:P["a"],VContent:_["a"],VDataTable:D["a"],VRow:T["a"],VSelect:R["a"],VSpacer:A["a"]});var C=r("f309");n["a"].use(C["a"]);var M=new C["a"]({});n["a"].config.productionTip=!1,new n["a"]({vuetify:M,render:function(e){return e(V)}}).$mount("#app")}});
//# sourceMappingURL=app.de402595.js.map